---
title: Week5_2 그래프를 바이럴 마케팅에 어떻게 활용할까?
categories: [boostcamp]
tags: [부스트캠프, Graph]
math: true
comments: true
---

\- 이 강의정리본은 KAIST 신기정 교수님의 강의를 정리한 것임을 밝힙니다.\- 

### 그래프를 통한 전파의 예시

- 온라인 소셜 네트워크를 통해 다양한 정보, 행동이 전파됨.
  - ex) 2011년 스페인의 15M 운동에 대한 정보 - 트위터를 통해 전파됨.
  - ex) 트위터를 통한 아이스버킷 챌린지
- 컴퓨터 네트워크에서는 일부 장비의 고장이 전파되어 전체 네트워크를 마비시킬 수 있다.
- 파워그리드에서 정전이 전파되는 과정
- 사회라는 네트워크에서 질병의 전파

### 전파 과정을 위한 모형 2개

- 전파과정은 매우 다양 & 매우 복잡
- 체계적으로 이해하기 위해 `수학적 모형화`가 필요
- 이를 위한 다양한 모형 중 두 가지 : 의사결정 기반, 확률적 전파모형

#### 의사결정 기반의 전파 모형

- 언제 의사결정 기반의 전파모형을 사용할까?
  - 1970년대의 비디오 유형 두 가지 : `VHS`, `Betamax`
  - 현대 : `카톡`과 `라인` 중 어떤 것을 사용하는가?
  - 주변 사람들의 의사결정이 본인의 의사결정에 영향을 미침. 친구가 카톡을 쓰면 나도 카톡을 쓴다.
- 의사결정 기반의 전파모형 : 주변 사람들의 의사결정을 고려하여 의사결정을 내리는 경우를 의미함.
- 선형 임계치 모형 (Linear Threshold Model): 가장 간단한 형태의 의사결정 기반 전파모형
- 수학적 추상화
  - `u`와 `v`라는 두 친구가 있다. 이 둘은 `카톡`과 `라인`중 하나를 선택한다.
  - 둘 모두 `카톡`을 선택할 경우 `a`만큼 행복이 증가하고, `라인`을 선택할 경우 `b`만큼 행복이 증가한다. (호환이 가능하기 때문)
  - 둘이 서로 다른 기술을 사용할 경우 행복이 증가하지 X.
  - 이번에는 여러 사람이 등장하는 SNS를 가정해보자.
  - 만약 5명의 친구가 있는 `u`가 있는데, 친구 중 2명이 `카톡`을, 3명이 `라인`을 사용하고 있다고 하자.
    - `u`가 `카톡`을 선택할 경우 `2a`만큼 행복 증가.
    - `u`가 `라인`을 선택할 경우 `3b`만큼 행복 증가.
    - 만약 `2a > 3b` 라면 `카톡`을, `2a < 3b`라면 `라인`을, 편의상 `2a = 3b`라면 `라인`을 선택한다고 하자.
  - 일반화 해보자. `p`의 비율의 이웃이 `A`를, `1-p`의 비율의 이웃이 `B`를 선택한다고 하자. 총 이웃 수는 `N`
    - `A` 선택 시의 행복 증가분 = `a * p * N`
    - `B` 선택 시의 행복 증가분 = `b * (1-p) * N`
    - 결국 `ap`와 `b(1-p)`를 비교하여 선택하게 됨.
    - `ap > b(1-p)`, 즉 $$p > \frac{b}{a + b}$$ 일 때 `A`를 선택할 것이다.
    - $$\frac{b}{a + b}$$를 `임계치` `q`라고 하자.
  - 따라서, 이웃 중 `A`를 선택한 비율이 임계치 `q`를 넘길 경우에만 `A`를 선택한다.
- 모형에서, 전부 `B`를 사용하지만, 얼리어답터들만 `A`를 사용하는 상황을 가정하자. 이들을 `시드 집합(Seed Set)`이라 부른다.
- 임계치 `q` = 55%를 가정하고, 얼리어답터 `u`와 `v`가 등장했다고 하자.
- ![image-20210223162202913](/assets/img/post-images/image-20210223162202913.png){: width="80%"}
- 이들이 생겨남에 따라, 주변인들은  `u`와 `v`의 선택을 고려하여 각자 다시 기술을 선택함.
- ![image-20210223162301124](/assets/img/post-images/image-20210223162301124.png){: width="80%"}
- ![image-20210223162424309](/assets/img/post-images/image-20210223162424309.png){: width="80%"}
- ![image-20210223162543672](/assets/img/post-images/image-20210223162543672.png){: width="80%"}
- ![image-20210223162553984](/assets/img/post-images/image-20210223162553984.png){: width="80%"}
- 전파되는 과정을 살펴보자. 첫 전파 과정에서 `4`명이, 두 번째 전파 과정에서 `1`명이, 세 번째 전파과정에서 또 `1`명이, 마지막 전파과정에서 `1`명이 `A`를 선택함.
- 왼쪽 두 명은 여전히 `A`를 선택한 이웃의 비율이 임계치를 넘지 않았기 때문에 자신의 행동을 바꾸지 않음.

#### 확률적 전파모형

- 언제 확률적 전파 모형을 사용할까?
  - `코로나`를 예시로 들어보자. 이 경우 의사결정 모형은 적합하지 않다. 코로나 걸리기를 원하는 사람은 없기 때문!
  - 코로나의 전파는 확률적 과정이므로 확률적 전파 모형을 고려해야 한다.
- 독립적 전파 모형(Independent Cascade Model)
  - 방향성이 있고 가중치가 있는 그래프를 가정한다.
  - 간선 `(u, v)`의 가중치 $$p_{uv}$$는, `u`가 감염되었을 때, 감염되지 않은 `v`를 감염시킬 확률에 해당한다.
  - 실제로 `u`가 감염되었다면, `v`는 $$p_{uv}$$의 확률로 전염된다.
  - `독립적`이라는 이름에서 알 수 있듯이, 서로 다른 이웃이 전염되는 확률은 독립적이다.
    - `u`가 감염되었을 때 `v`를 감염시킬 확률과, `w`를 감염시킬 확률은 독립적이다. 
  - 이전 모형과 마찬가지로, 첫 감염자들을 `시드 집합(Seed Set)`이라고 부른다.
    - 최초 감염자 `u`는 각 이웃 `v`에게 $$p_{uv}$$ 확률로 병을 전파한다.
    - 위 과정을 새로운 감염자에게 반복하고, 더 이상 새로운 감염자가 없으면 종료한다.
    - 여기서는, 감염자는 계속 감염상태로 남아있는 것을 가정한다. (회복을 가정하는 `SIS`, `SIR` 등의 다른 전파모형도 존재함.)

### 바이럴 마케팅과 전파 최대화 문제

- 바이럴 마케팅?
  - 소비자들로 하여금 상품에 대한 긍정적인 입소문을 내게 하는 기법.
  - 소문의 `시작점`이 중요!
  - 소셜 인플루언서들이 높은 광고비를 받는 이유이다.
- 시드 집합의 중요성
  - 앞서 봤던 선형 임계치 모형의 예시에서, `u`와 `v`가 시드집합이 되었을 때 많은 이웃의 선택이 바뀌었다.
  - 그러나, 만약 이웃이 얼마 없는 시드 집합이 선택되는 경우 이웃의 선택은 거의 바뀌지 않는다. (임계치는 고려해야겠지만!)
- 전파 최대화 문제
  - 시드집합을 우리가 선택할 수 있다면 누구를 선택할까?
  - `그래프`, `전파 모형`, 그리고 `시드 집합의 크기`가 주어졌을 때 전파를 최대화하는 시드집합을 찾는 문제 → **전파 최대화 문제**
  - 즉, 소셜 네트워크로부터 영향력 있는 시드집합을 찾아내는 문제이다.
  - 굉장히 어려운 문제이다. `V`개의 정점이 있을 경우, 시드 집합의 크기가 `k`개라면, `|V| combi k`개의 경우의 수가 생긴다.
    - 정점이 10,000개, 시드 집합의 크기가 10이라면 경우의 수는 .... (엄청남).
    - 전파 최대화 문제는 `NP-hard` 임이 증명되었다.
    - 최고의 시드 집합을 찾는 것은 불가능하다.
    - 따라서 휴리스틱을 사용해보자~!
- 정점 중심성 휴리스틱
  - 휴리스틱 : `실험적`으로는 잘 동작할 수 있지만, `이론적`으로는 보장할 수 없는 알고리즘.
  - 정점 중심성 휴리스틱?
    - 시드 집합의 크기가 `k`개로 고정됐을 때, 정점의 중심성이 높은 순으로 `k`개의 정점을 선택하는 방법.
    - 중심성으로는 `페이지랭크 점수`, `연결 중심성`, `근접 중심성`, `매개 중심성` 등이 있다.
    - 합리적인 방법이지만, 최고의 시드집합을 찾을 것이라는 보장은 X.
- 탐욕 알고리즘
  - 전파 최대화 문제를 푸는 방법으로 얘도 많이 사용됨.
  - 탐욕 알고리즘은 시드 집합의 원소, 즉 최초 전파자를 **한 번에 한 명씩** 선택한다.
  - 집합 `{1}, {2}, ... {|V|}` (V개)를 비교하여, 전파를 최대화하는 시드 집합을 찾음. 
    - 전파의 크기를 비교하기 위해, 시뮬레이션을 반복하여 평균 값을 사용함.
    - 이 때 뽑힌 집합을 `{x}`라고 하자.
  - 다음으로, `{x, 1}, {x, 2}, ... {x, |V|}` (|V| - 1 개) 를 비교하여 전파를 최대화하는 시드 집합을 찾음.
    - 뽑힌 집합을 `{x, y}`라 하자.
  - 이렇게 시드 집합의 크기가 `k`가 될 때까지 위 과정을 반복한다.
  - 즉, 탐욕 알고리즘은 시드 집합의 조합에 따른 효과를 고려하지 않고, 근시안적으로 최초 전파자를 선택하는 과정을 반복함.
  - 그럼, 탐욕 알고리즘은 얼마나 정확할까? 
    - 탐욕알고리즘으로 찾은 시드 집합에 의한 전파의 평균 크기 >= `0.632` * 최고의 시드집합에 의한 전파의 평균 크기 임이 보장되어 있다.
    - 즉, 아무리 못해도 `0.632`배의 성능은 낸다는 것!

### 실습 : 전파 모형 시뮬레이터 구현

#### 독립적 전파 모형 시뮬레이터

#### 선형 임계치 모형 시뮬레이터





